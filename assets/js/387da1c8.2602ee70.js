"use strict";(self.webpackChunkth_ws=self.webpackChunkth_ws||[]).push([[484],{2880:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"my-tutorials/week-3/3-5","title":"3-5 Editing Recipes and Recompiling Yocto Project","description":"This tutorial guides you on configuring and compiling the Yocto project to include a custom equirectangular GStreamer plugin.","source":"@site/docs/my-tutorials/week-3/3-5.md","sourceDirName":"my-tutorials/week-3","slug":"/my-tutorials/week-3/3-5","permalink":"/tianhom/docs/my-tutorials/week-3/3-5","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/my-tutorials/week-3/3-5.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"3-4 Preparing gst-plugins-bad Project for Yocto Compilation","permalink":"/tianhom/docs/my-tutorials/week-3/3-4"},"next":{"title":"3-6 Perform Streaming Tests on RZ/G2L","permalink":"/tianhom/docs/my-tutorials/week-3/3-6"}}');var i=n(4848),r=n(8453);const s={sidebar_position:5},a="3-5 Editing Recipes and Recompiling Yocto Project",c={},d=[{value:"Step 1: Modify the Yocto Project Configuration",id:"step-1-modify-the-yocto-project-configuration",level:2},{value:"Step 2: Recompile and Flash Yocto Image",id:"step-2-recompile-and-flash-yocto-image",level:2},{value:"Step 3: Verify on RZ/G2L Board",id:"step-3-verify-on-rzg2l-board",level:2},{value:"Step 4: Prepare the Working Directory and Transfer Test Data",id:"step-4-prepare-the-working-directory-and-transfer-test-data",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"3-5-editing-recipes-and-recompiling-yocto-project",children:"3-5 Editing Recipes and Recompiling Yocto Project"})}),"\n",(0,i.jsxs)(t.p,{children:["This tutorial guides you on configuring and compiling the Yocto project to include a custom ",(0,i.jsx)(t.code,{children:"equirectangular"})," GStreamer plugin."]}),"\n",(0,i.jsxs)(t.p,{children:["Before we start, ensure you have a ",(0,i.jsx)(t.strong,{children:"Docker container"})," set up for Yocto project compilation."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["Refer to ",(0,i.jsx)(t.a,{href:"/tianhom/docs/my-tutorials/week-2/2-1",children:"Section 2-1"})," for detailed instructions on setting up the Yocto build environment."]})}),"\n",(0,i.jsx)(t.h2,{id:"step-1-modify-the-yocto-project-configuration",children:"Step 1: Modify the Yocto Project Configuration"}),"\n",(0,i.jsx)(t.p,{children:"Navigate to the following file in your Yocto project folder:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"meta-renesas/meta-rz-common/recipes-multimedia/gstreamer/gstreamer1.0-plugins-bad_1.16.3.bbappend\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Modify the first line in the ",(0,i.jsx)(t.code,{children:"SRC_URI_append"})," section to point to your repository:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'SRC_URI_append = " \\\ngit://github.com/yourskc/gst-plugins-bad.git;branch=RCAR-GEN3e/1.16.3 \\\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Add the following line to specify the commit ID to be used and replace ",(0,i.jsx)(t.code,{children:"commit ID"})," with the actual commit ID:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'SRCREV="28ea2e113580be9d73d798ba58b82aa3ec62b92c"\n'})}),"\n",(0,i.jsx)(t.h2,{id:"step-2-recompile-and-flash-yocto-image",children:"Step 2: Recompile and Flash Yocto Image"}),"\n",(0,i.jsx)(t.p,{children:"Run the following command to build the image:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"MACHINE=smarc-rzg2l bitbake core-image-qt\n"})}),"\n",(0,i.jsx)(t.p,{children:"Next, use the bmaptool command to flash the image to your SD card:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"sudo bmaptool copy image.wic.gz /dev/sdX\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Replace ",(0,i.jsx)(t.code,{children:"image"})," with the name of your image file and ",(0,i.jsx)(t.code,{children:"/dev/sdX"})," with the appropriate SD card device."]}),"\n",(0,i.jsx)(t.h2,{id:"step-3-verify-on-rzg2l-board",children:"Step 3: Verify on RZ/G2L Board"}),"\n",(0,i.jsxs)(t.p,{children:["Boot the RZ/G2L board and verify the presence of the ",(0,i.jsx)(t.code,{children:"equirectangular"})," element in the GStreamer library:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"gst-inspect-1.0 equirectangular\n"})}),"\n",(0,i.jsxs)(t.p,{children:["The output should confirm the existence of the ",(0,i.jsx)(t.code,{children:"equirectangular"})," element."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"output",src:n(7157).A+"",width:"1280",height:"1540"})}),"\n",(0,i.jsx)(t.h2,{id:"step-4-prepare-the-working-directory-and-transfer-test-data",children:"Step 4: Prepare the Working Directory and Transfer Test Data"}),"\n",(0,i.jsx)(t.p,{children:"On the RZ/G2L board, create a working directory:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"cd /home/root\nmkdir gst-work\ncd gst-work\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Use ",(0,i.jsx)(t.code,{children:"scp"})," to copy the test environment files to the RZ/G2L board:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"scp -r user@IP:/path/to/test_env/* .\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Verify that ",(0,i.jsx)(t.code,{children:"EquimatX"})," and ",(0,i.jsx)(t.code,{children:"EquimatY"})," are in the directory before running the GStreamer pipeline with the ",(0,i.jsx)(t.code,{children:"equirectangular"})," filter."]}),"\n",(0,i.jsxs)(t.admonition,{title:"Additional Info",type:"tip",children:[(0,i.jsx)(t.p,{children:"For a resolution of 1920 x 1080, the size of the X and Y map files can be calculated as:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"1,920 x 1,080 x 4 + 16 = 8,294,416 bytes\n"})}),(0,i.jsx)(t.p,{children:"Each point requires 4 bytes, and the files include an additional 16-byte header."})]}),"\n",(0,i.jsx)(t.hr,{})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},7157:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/3-5-0-12ceff79cc78988f1db39d2a865bd16b.png"},8453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var o=n(6540);const i={},r=o.createContext(i);function s(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:t},e.children)}}}]);