"use strict";(self.webpackChunkth_ws=self.webpackChunkth_ws||[]).push([[563],{1592:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"my-docs/reads/reads_4","title":"Patch Files","description":"A patch file is a text file that describes the differences (or \\"diffs\\") between two versions of a file.","source":"@site/docs/my-docs/reads/reads_4.md","sourceDirName":"my-docs/reads","slug":"/my-docs/reads/reads_4","permalink":"/tianhom/docs/my-docs/reads/reads_4","draft":false,"unlisted":false,"editUrl":"https://github.com/tianhom0919/tianhom/tree/main/th-ws/docs/my-docs/reads/reads_4.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"mydocsSidebar","previous":{"title":"Git Commit Best Practices","permalink":"/tianhom/docs/my-docs/reads/reads_3"},"next":{"title":"Regular Expressions","permalink":"/tianhom/docs/my-docs/reads/reads_5"}}');var t=n(4848),l=n(8453);const r={sidebar_position:4},d="Patch Files",c={},a=[{value:"Basic Syntax of Patch Files",id:"basic-syntax-of-patch-files",level:2},{value:"Header Info",id:"header-info",level:3},{value:"Chunk Information",id:"chunk-information",level:3},{value:"Example Patch File",id:"example-patch-file",level:3},{value:"Is It Applicable to All Text-Based Files?",id:"is-it-applicable-to-all-text-based-files",level:2},{value:"Why Only Text-Based Files?",id:"why-only-text-based-files",level:3},{value:"What <code>-p</code> Option Means in the <code>patch</code> Command",id:"what--p-option-means-in-the-patch-command",level:2},{value:"Why Are <code>a/</code> and <code>b/</code> Prefixes Used",id:"why-are-a-and-b-prefixes-used",level:2},{value:"Why Not Match Files Directly?",id:"why-not-match-files-directly",level:3}];function o(e){const i={admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"patch-files",children:"Patch Files"})}),"\n",(0,t.jsx)(i.p,{children:'A patch file is a text file that describes the differences (or "diffs") between two versions of a file.'}),"\n",(0,t.jsxs)(i.p,{children:["They are typically generated by tools like ",(0,t.jsx)(i.code,{children:"diff"})," or ",(0,t.jsx)(i.code,{children:"git diff"})," and are used to update files by applying these differences automatically."]}),"\n",(0,t.jsx)(i.p,{children:"Patch files are commonly used in software development to share updates, bug fixes, or improvements without distributing entire files."}),"\n",(0,t.jsx)(i.h2,{id:"basic-syntax-of-patch-files",children:"Basic Syntax of Patch Files"}),"\n",(0,t.jsx)(i.p,{children:"The patch file contains specific markers that indicate which lines to add, remove, or modify."}),"\n",(0,t.jsx)(i.h3,{id:"header-info",children:"Header Info"}),"\n",(0,t.jsx)(i.p,{children:"The header contains metadata about the files being compared:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"File paths"}),": Paths to the old and new files."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Timestamps"}),": Optional, showing when each file was last modified."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"Example:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-diff",children:"--- original_file.txt   2024-12-01 12:00:00\r\n+++ modified_file.txt   2024-12-02 14:30:00\n"})}),"\n",(0,t.jsx)(i.h3,{id:"chunk-information",children:"Chunk Information"}),"\n",(0,t.jsx)(i.p,{children:'Each change is presented as a "chunk" and starts with a line like this:'}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-diff",children:"@@ -start_line_old,lines_to_remove +start_line_new,lines_to_add @@\n"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"-start_line_old"}),": The starting line number in the original file."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"lines_to_remove"}),": Number of lines in the original file affected."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"+start_line_new"}),": The starting line number in the modified file."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"lines_to_add"}),": Number of lines in the modified file affected."]}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Key Elements"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"---"})," and ",(0,t.jsx)(i.code,{children:"+++"}),": Indicate the file paths.","\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"---"})," is the original file."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"+++"})," is the modified file."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"@@"}),": Specifies the lines affected by the changes in the form of line numbers and ranges."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"-"})," (Minus Sign): Denotes lines to remove."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"+"})," (Plus Sign): Denotes lines to add."]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"example-patch-file",children:"Example Patch File"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Original File"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-text",metastring:'title="original.txt"',children:"Line 1\r\nLine 2\r\nLine 3\n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Modified File"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-text",metastring:'title="modified.txt"',children:"Line 1\r\nLine 2\r\nLine 3 changed\r\nLine 4 added\n"})}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Patch File"})}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-diff",metastring:'title="changes.patch"',children:"--- original.txt   2024-12-01 12:00:00\r\n+++ modified.txt   2024-12-02 14:30:00\r\n@@ -1,3 +1,4 @@\r\n Line 1\r\n Line 2\r\n-Line 3\r\n+Line 3 changed\r\n+Line 4 added\n"})}),"\n",(0,t.jsx)(i.p,{children:"To create a patch file:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"diff -u original.txt modified.txt > changes.patch\n"})}),"\n",(0,t.jsx)(i.p,{children:"To apply the patch:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"patch original.txt < changes.patch\n"})}),"\n",(0,t.jsx)(i.h2,{id:"is-it-applicable-to-all-text-based-files",children:"Is It Applicable to All Text-Based Files?"}),"\n",(0,t.jsx)(i.p,{children:"Patch files work with any text-based files, such as:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Source code files (e.g., .c, .py, .java)."}),"\n",(0,t.jsx)(i.li,{children:"Configuration files (e.g., .yaml, .json, .conf)."}),"\n",(0,t.jsx)(i.li,{children:"Documentation (e.g., .md, .txt)."}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"They rely on comparing line-by-line differences, which makes them ideal for structured, text-based formats."}),"\n",(0,t.jsx)(i.h3,{id:"why-only-text-based-files",children:"Why Only Text-Based Files?"}),"\n",(0,t.jsx)(i.p,{children:"Patch tools analyze line-based differences. Binary files (like images or executables) lack this structure, making them incompatible with typical patch tools."}),"\n",(0,t.jsxs)(i.admonition,{type:"note",children:[(0,t.jsx)(i.p,{children:"While patch files can be applied to any text file, their success depends on:"}),(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"The file being unaltered since the patch was created."}),"\n",(0,t.jsx)(i.li,{children:"Correct formatting of the patch file."}),"\n"]})]}),"\n",(0,t.jsxs)(i.h2,{id:"what--p-option-means-in-the-patch-command",children:["What ",(0,t.jsx)(i.code,{children:"-p"})," Option Means in the ",(0,t.jsx)(i.code,{children:"patch"})," Command"]}),"\n",(0,t.jsxs)(i.p,{children:["The ",(0,t.jsx)(i.code,{children:"-p"})," option determines how many leading directory components are stripped from the file paths in the patch file. It ensures that the file paths in the patch file align with the file system\u2019s directory structure."]}),"\n",(0,t.jsx)(i.p,{children:"Consider this example file path in a patch file:"}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.code,{children:"a/src/file.txt"})}),"\n",(0,t.jsxs)(i.p,{children:["If you use ",(0,t.jsx)(i.code,{children:"-p1"}),", the first directory component (",(0,t.jsx)(i.code,{children:"a/"}),") is stripped, leaving ",(0,t.jsx)(i.code,{children:"src/file.txt"})," as the path to match."]}),"\n",(0,t.jsx)(i.p,{children:(0,t.jsx)(i.strong,{children:"Use Cases"})}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"-p0"}),": No components are stripped; the full path is used."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"-p1"}),": Strips the first component (e.g. ",(0,t.jsx)(i.code,{children:"a/"})," or ",(0,t.jsx)(i.code,{children:"b/"}),"), commonly used with Git-generated patches."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"-p2"}),": Strips the first two components, useful when deeper directories are included in the patch."]}),"\n"]}),"\n",(0,t.jsxs)(i.h2,{id:"why-are-a-and-b-prefixes-used",children:["Why Are ",(0,t.jsx)(i.code,{children:"a/"})," and ",(0,t.jsx)(i.code,{children:"b/"})," Prefixes Used"]}),"\n",(0,t.jsx)(i.p,{children:"These prefixes are conventions introduced by version control systems like Git to provide clarity and consistency when comparing versions."}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"a/"}),": Represents the ",(0,t.jsx)(i.strong,{children:"original"})," version of the file."]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.code,{children:"b/"}),": Represents the ",(0,t.jsx)(i.strong,{children:"modified"})," version of the file."]}),"\n"]}),"\n",(0,t.jsx)(i.h3,{id:"why-not-match-files-directly",children:"Why Not Match Files Directly?"}),"\n",(0,t.jsx)(i.p,{children:"Matching directly could lead to:"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Ambiguity"}),(0,t.jsx)(i.br,{}),"\n","In complex projects with similar file names across directories, prefixes clarify which version of a file is being referenced."]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Incompatibility"}),(0,t.jsx)(i.br,{}),"\n","Git and other tools rely on these prefixes for operations like merges, rebases, and patches."]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Version Tracking"}),(0,t.jsx)(i.br,{}),"\n","The prefixes are critical in differentiating changes across renamed or moved files."]}),"\n",(0,t.jsx)(i.p,{children:"Prefixes are beneficial as it works seamlessly with Git and patch utilities, aligns with version control system conventions and ensures changes are applied to the correct version of the file."}),"\n",(0,t.jsxs)(i.p,{children:["Using the ",(0,t.jsx)(i.code,{children:"-p"})," option mentioned above, the prefixes can be stripped to match the local file structure, enabling compatibility without manual intervention."]}),"\n",(0,t.jsx)(i.hr,{})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>d});var s=n(6540);const t={},l=s.createContext(t);function r(e){const i=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(l.Provider,{value:i},e.children)}}}]);