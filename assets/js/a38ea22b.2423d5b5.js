"use strict";(self.webpackChunkth_ws=self.webpackChunkth_ws||[]).push([[8951],{7718:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"my-tutorials/other-tutorials/1-8","title":"8\ufe0f\u20e3 Setting Up a Self-Hosted GitLab Instance","description":"GitLab self-hosting refers to running your own instance of GitLab on your own server instead of using GitLab\'s cloud-based services (GitLab.com). This allows organizations or individuals to have full control over their repositories, CI/CD pipelines, and development workflows while keeping their data private.","source":"@site/docs/my-tutorials/other-tutorials/1-8.md","sourceDirName":"my-tutorials/other-tutorials","slug":"/my-tutorials/other-tutorials/1-8","permalink":"/tianhom/docs/my-tutorials/other-tutorials/1-8","draft":false,"unlisted":false,"editUrl":"https://github.com/tianhom0919/tianhom/tree/main/th-ws/docs/my-tutorials/other-tutorials/1-8.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"7\ufe0f\u20e3 Installing Hyper-V Server 2019","permalink":"/tianhom/docs/my-tutorials/other-tutorials/1-7"}}');var i=t(4848),a=t(8453);const l={sidebar_position:8},r="8\ufe0f\u20e3 Setting Up a Self-Hosted GitLab Instance",o={},c=[{value:"Step 1: Update System and Install Dependencies",id:"step-1-update-system-and-install-dependencies",level:2},{value:"Step 2: Install GitLab",id:"step-2-install-gitlab",level:2},{value:"Step 3: Configure GitLab",id:"step-3-configure-gitlab",level:2},{value:"Step 4: Adjust Firewall Settings",id:"step-4-adjust-firewall-settings",level:2},{value:"Step 5: Access GitLab Web Interface",id:"step-5-access-gitlab-web-interface",level:2},{value:"Step 6: Optional Configurations",id:"step-6-optional-configurations",level:2},{value:"Enable Auto-Start on Boot",id:"enable-auto-start-on-boot",level:3},{value:"Backup GitLab",id:"backup-gitlab",level:3},{value:"Conclusion",id:"conclusion",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"8\ufe0f\u20e3-setting-up-a-self-hosted-gitlab-instance",children:"8\ufe0f\u20e3 Setting Up a Self-Hosted GitLab Instance"})}),"\n",(0,i.jsx)(n.p,{children:"GitLab self-hosting refers to running your own instance of GitLab on your own server instead of using GitLab's cloud-based services (GitLab.com). This allows organizations or individuals to have full control over their repositories, CI/CD pipelines, and development workflows while keeping their data private."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"step-1-update-system-and-install-dependencies",children:"Step 1: Update System and Install Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Before installing GitLab, update and upgrade your system packages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt update && sudo apt upgrade -y\n"})}),"\n",(0,i.jsx)(n.p,{children:"GitLab requires some essential packages. Install them using:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt install -y curl openssh-server ca-certificates tzdata perl\n"})}),"\n",(0,i.jsx)(n.p,{children:"If you want GitLab to send emails (e.g., password resets), install Postfix:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo apt install -y postfix\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-2-install-gitlab",children:"Step 2: Install GitLab"}),"\n",(0,i.jsx)(n.p,{children:"Download the GitLab repository script and install the package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"curl -fsSL https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.deb.sh | sudo bash\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you want the free ",(0,i.jsx)(n.strong,{children:"Community Edition (CE)"})," instead of the ",(0,i.jsx)(n.strong,{children:"Enterprise Edition (EE)"}),", replace ",(0,i.jsx)(n.code,{children:"gitlab-ee"})," with ",(0,i.jsx)(n.code,{children:"gitlab-ce"})," in the script above."]}),"\n",(0,i.jsxs)(n.p,{children:["Replace ",(0,i.jsx)(n.code,{children:"<YOUR_DOMAIN>"})," with your actual domain (or use your server\u2019s IP address if you don\u2019t have one)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'sudo EXTERNAL_URL="http://<YOUR_DOMAIN>" apt install -y gitlab-ee\n'})}),"\n",(0,i.jsx)(n.p,{children:"For HTTPS, use:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'sudo EXTERNAL_URL="https://<YOUR_DOMAIN>" apt install -y gitlab-ee\n'})}),"\n",(0,i.jsx)(n.p,{children:"GitLab will install and configure itself."}),"\n",(0,i.jsx)(n.h2,{id:"step-3-configure-gitlab",children:"Step 3: Configure GitLab"}),"\n",(0,i.jsx)(n.p,{children:"The main configuration file is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/gitlab/gitlab.rb\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can change settings like:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"External URL"}),"\n",(0,i.jsx)(n.li,{children:"Port bindings"}),"\n",(0,i.jsx)(n.li,{children:"Email settings"}),"\n",(0,i.jsx)(n.li,{children:"Backup configuration"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"After making changes, apply them:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo gitlab-ctl reconfigure\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-4-adjust-firewall-settings",children:"Step 4: Adjust Firewall Settings"}),"\n",(0,i.jsx)(n.p,{children:"If you have UFW (Uncomplicated Firewall) enabled, allow necessary ports:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo ufw allow http\r\nsudo ufw allow https\r\nsudo ufw allow OpenSSH\r\nsudo ufw enable\n"})}),"\n",(0,i.jsx)(n.h2,{id:"step-5-access-gitlab-web-interface",children:"Step 5: Access GitLab Web Interface"}),"\n",(0,i.jsx)(n.p,{children:"Open your browser and go to:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"http://<YOUR_DOMAIN> or http://<YOUR_SERVER_IP>\n"})}),"\n",(0,i.jsx)(n.p,{children:"The first time, GitLab will ask for the root password. Get it using:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo cat /etc/gitlab/initial_root_password\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Log in with the username set as ",(0,i.jsx)(n.code,{children:"root"})," and the password obtained from the file above."]}),"\n",(0,i.jsx)(n.h2,{id:"step-6-optional-configurations",children:"Step 6: Optional Configurations"}),"\n",(0,i.jsx)(n.h3,{id:"enable-auto-start-on-boot",children:"Enable Auto-Start on Boot"}),"\n",(0,i.jsx)(n.p,{children:"Ensure GitLab runs on every system startup:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo systemctl enable gitlab-runsvdir\n"})}),"\n",(0,i.jsx)(n.h3,{id:"backup-gitlab",children:"Backup GitLab"}),"\n",(0,i.jsx)(n.p,{children:"Create a backup to prevent data loss:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"sudo gitlab-backup create\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Backups are stored in ",(0,i.jsx)(n.code,{children:"/var/opt/gitlab/backups/"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(n.p,{children:"You now have a fully functional self-hosted GitLab instance running on Ubuntu 22.04. You can start creating repositories, setting up CI/CD, and managing users."}),"\n",(0,i.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var s=t(6540);const i={},a=s.createContext(i);function l(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);